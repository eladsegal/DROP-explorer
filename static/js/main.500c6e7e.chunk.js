(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{52:function(e,t,a){e.exports=a(81)},57:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(25),s=a.n(r),c=(a(57),a(7)),l=a(8),o=a(10),d=a(9),p=a(3),u=a(11),h=a(99),g=a(100),f=a(101),y=a(102);function m(e,t){return Object.keys(e).map(function(a){return e[a][t]=a,e[a]})}function v(e,t,a){for(var n=Array.apply(null,{length:e.length}).map(function(){return 0}),i=[],r=0,s=0;;){for(;s<e.length;)for(var c=0;c<e.length;c++){for(var l=e[c],o=t(l[n[c]]);o<r;){if(n[c]++,n[c]===l.length)return i;o=t(l[n[c]])}o>r?(r=o,s=1):s++}var d=a(e.reduce(function(e,t,a){return e.push(t[n[a]]),e},[]));d&&i.push(d),r+=1,s=0}}function b(e,t,a,n,i){for(var r=[],s=0;s<e.length;s++){var c=e[s];if(t[c]!==a[c]){if(!n)return!0;r.push(c)}}var l=r.length>0;return n&&l&&console.log("".concat(i," Caused update: ").concat(r.join(", "))),l}function w(e,t,a,n,i,r,s,c){var l=b(e,a,i,s,"[".concat(c,"][props]")),o=b(t,n,r,s,"[".concat(c,"][state]"));return l||o}function O(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.reduce(function(e,i){var r=function(e,t,a){if(Math.floor(e/a)===t)return e%a}(i,t,a);return void 0!==r&&(n?e[r]=!0:e.push(r)),e},n?{}:[])}function C(e,t,a){return a*t+e}var S=a(16),F=a(40),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).fileInputRef=i.a.createRef(),a.simulateClick=a.simulateClick.bind(Object(p.a)(a)),a.change=a.change.bind(Object(p.a)(a)),a.state={file:void 0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.file!==this.state.file&&this.props.onChange(this.state.file)}},{key:"simulateClick",value:function(){this.fileInputRef.current.click()}},{key:"change",value:function(e){var t;if(e.length>0){var a=e[0];a&&(t=a)}this.setState({file:t})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("input",{ref:this.fileInputRef,style:{display:"none"},type:"file",id:"file",accept:this.props.accept,onChange:function(t){return e.change(t.target.files)}}),i.a.createElement(F.a,{style:this.props.style,color:this.props.color,size:this.props.size,onClick:this.simulateClick},this.props.text),this.state.file?this.state.file.name:"")}}]),t}(i.a.PureComponent),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).change=a.change.bind(Object(p.a)(a)),a.state={dataset:void 0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.dataset!==this.state.dataset&&this.props.onChange(this.state.dataset)}},{key:"change",value:function(e){var t=this;if(e){var a=new FileReader;a.onloadend=function(e){var a=m(JSON.parse(e.target.result),"passage_id");t.setState({dataset:a})},a.readAsText(e)}else this.setState({dataset:void 0})}},{key:"render",value:function(){return i.a.createElement(E,{accept:".json",text:"Choose File",size:"md",color:"primary",style:{width:"100%"},onChange:this.change})}}]),t}(i.a.PureComponent),j=window&&window.location&&window.location.origin,_=j.includes(":3000")?j.replace(":3000",":8000"):j,k=a(82),P=a(83),x=a(84),A=a(85),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).toggle=a.toggle.bind(Object(p.a)(a)),a.change=a.change.bind(Object(p.a)(a)),a.state={dropdownOpen:!1,datasets_names:[],selected:void 0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"componentDidMount",value:function(){this.mounted=!0,this.getDatasetList()}},{key:"componentDidUpdate",value:function(e,t){t.selected!==this.state.selected&&(this.props.onChange(void 0),this.getDataset(this.state.selected))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"change",value:function(e){this.setState({selected:e.currentTarget.getAttribute("dataset-name")})}},{key:"getDatasetList",value:function(){var e=this;fetch("".concat(_,"/dataset-list"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.mounted&&e.setState({datasets_names:t,selected:t.length>0?t[0]:void 0})}).catch(function(e){console.error(e)})}},{key:"getDataset",value:function(e){var t=this;e&&fetch("".concat(_,"/dataset?name=").concat(encodeURIComponent(e)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var a=m(e,"passage_id");t.props.onChange(a)}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=this.state.datasets_names;return i.a.createElement(k.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},i.a.createElement(P.a,{color:"primary",caret:!0,style:{width:"100%"}},this.state.selected?this.state.selected:"Select..."),i.a.createElement(x.a,null,t.map(function(t){return i.a.createElement(A.a,{onClick:e.change,key:t,"dataset-name":t},t)})))}}]),t}(i.a.PureComponent),q=a(89),R=a(90),z=a(86),N=a(87),L=a(88);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).change=a.change.bind(Object(p.a)(a)),a.state={checked:a.props.checked},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.onChange(this.state.checked)}},{key:"change",value:function(){this.setState({checked:!this.state.checked})}},{key:"render",value:function(){return i.a.createElement(z.a,{check:!0,style:M({},this.props.inline?{display:"inline"}:{},{},this.props.style)},i.a.createElement(N.a,{check:!0},i.a.createElement(L.a,{type:"checkbox",style:this.props.style&&this.props.style.fontSize&&"smaller"===this.props.style.fontSize?{marginLeft:"-1rem",marginTop:"0.15rem"}:{},onChange:this.change,checked:this.state.checked||!1}),this.props.text))}}]),t}(i.a.PureComponent);function Q(e){return e.local?i.a.createElement(T,{onChange:e.onChange}):i.a.createElement(D,{onChange:e.onChange})}var U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).useLocalDatasetChange=a.useLocalDatasetChange.bind(Object(p.a)(a)),a.datasetChange=a.datasetChange.bind(Object(p.a)(a)),a.state={dataset:void 0,useLocalDataset:a.props.useLocalDataset},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.dataset!==this.state.dataset&&this.props.onDatasetChange(this.state.dataset)}},{key:"useLocalDatasetChange",value:function(e){this.setState({useLocalDataset:e,dataset:void 0})}},{key:"datasetChange",value:function(e){this.setState({dataset:e})}},{key:"render",value:function(){return i.a.createElement(q.a,null,this.props.allowSourceSelection?i.a.createElement(R.a,null,i.a.createElement(I,{text:"Use Local Dataset",checked:this.state.useLocalDataset,onChange:this.useLocalDatasetChange})):null,i.a.createElement(R.a,null,i.a.createElement(Q,{onChange:this.datasetChange,local:this.state.useLocalDataset})))}}]),t}(i.a.PureComponent),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).change=a.change.bind(Object(p.a)(a)),a.state={predictions:void 0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.predictions!==this.state.predictions&&this.props.onChange(this.state.predictions)}},{key:"change",value:function(e){var t=this;if(e){var a=new FileReader;a.onloadend=function(e){var a=[];e.target.result.split("\n").forEach(function(e){e&&a.push(JSON.parse(e))}),t.setState({predictions:a})},a.readAsText(e)}else this.setState({predictions:void 0})}},{key:"render",value:function(){return i.a.createElement(E,{accept:".json, .jsonl",text:"Choose File",size:"md",color:"primary",style:{width:"100%"},onChange:this.change})}}]),t}(i.a.PureComponent),G=a(93),B=a(94),W=a(95),J=a(96),X=a(97),K=a(14),Y={key:"none",value:"None"},Z={key:"none",value:"None"},$=[{key:"multi_span",value:"Multi Span",accessor:"spans"},{key:"single_span",value:"Single Span",accessor:"spans"},{key:"number",value:"Number",accessor:"number"},{key:"date",value:"Date",accessor:"date"}];function ee(e){var t="",a=Y;if("number"in e&&(0===e.number||e.number)){var n=e.number,i=Number(n);t=isNaN(i)?n:i.toString(),a=$[2]}else if("spans"in e&&e.spans&&e.spans.length>0){var r=e.spans;1===r.length?(t=r[0],a=$[1]):(t=Object(K.a)(r).sort().join(" \u2506 "),a=$[0])}else if("date"in e&&e.date){var s=e.date;["day","month","year"].some(function(e){return 0===s[e]||s[e]})&&(t=JSON.stringify(s,null,2),a=$[3])}return{displayAnswer:t,answerType:a}}function te(e){var t=[];if("number"in e&&(0===e.number||e.number)){var a=e.number,n=Number(a);t=isNaN(n)?[String(a)]:[n.toString()]}else if("spans"in e&&e.spans&&e.spans.length>0)t=e.spans;else if("date"in e&&e.date){var i=e.date;t=[],["day","month","year"].forEach(function(e){(0===i[e]||i[e])&&t.push(String(i[e]))})}return t.sort()}function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ne(e){return e.toLowerCase()}var ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).searchTextChange=a.searchTextChange.bind(Object(p.a)(a)),a.filterQuestionsChange=a.filterQuestionsChange.bind(Object(p.a)(a)),a.submit=a.submit.bind(Object(p.a)(a)),a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.props.searchProps,{draftSearchText:"",draftFilterQuestions:a.props.searchProps.filterQuestions}),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.searchText===this.state.searchText&&t.filterQuestions===this.state.filterQuestions||this.props.onChange({searchText:this.state.searchText,filterQuestions:this.state.filterQuestions})}},{key:"searchTextChange",value:function(e){var t={draftSearchText:e.target.value};this.props.instantSearch&&(t.searchText=ne(t.draftSearchText)),this.setState(t)}},{key:"filterQuestionsChange",value:function(e){var t={draftFilterQuestions:e};this.props.instantSearch&&(t.filterQuestions=t.draftFilterQuestions),this.setState(t)}},{key:"submit",value:function(e){this.setState({searchText:ne(this.state.draftSearchText),filterQuestions:this.state.draftFilterQuestions})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(q.a,null,i.a.createElement(R.a,null,i.a.createElement(L.a,{type:"text",value:this.state.draftSearchText,onChange:this.searchTextChange})),i.a.createElement(R.a,null,i.a.createElement(I,{text:"Filter Questions",checked:this.state.draftFilterQuestions,onChange:this.filterQuestionsChange}))),this.props.instantSearch?null:i.a.createElement(q.a,{className:"list-group-horizontal mt-1"},i.a.createElement(R.a,{style:{width:"100%"}},"Searched",this.state.filterQuestions?" (Filter Questions)":"",": ",i.a.createElement("span",{className:"text-info"},this.state.searchText)),i.a.createElement(R.a,null,i.a.createElement(F.a,{color:"primary",onClick:this.submit},"Submit"))))}}]),t}(i.a.PureComponent),re=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).change=a.change.bind(Object(p.a)(a)),a.state={checked:a.props.checked},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;b(["checked"],e,this.props)&&this.setState({checked:this.props.checked},function(){a.props.onChange(a.state.checked)})}},{key:"change",value:function(e){var t,a=this,n=e.currentTarget.getAttribute("option-key"),i=this.state.checked.indexOf(n);-1!==i?(t=Object(K.a)(this.state.checked)).splice(i,1):t=[].concat(Object(K.a)(this.state.checked),[n]),this.setState({checked:t},function(){return a.props.onChange(a.state.checked)})}},{key:"render",value:function(){var e=this;return this.props.options.map(function(t){return i.a.createElement(z.a,{check:!0,key:t.key},i.a.createElement(N.a,{check:!0},i.a.createElement(L.a,{type:"checkbox",onChange:e.change,"option-key":t.key,checked:e.state.checked&&e.state.checked.includes(t.key)||!1}),t.value))})}}]),t}(i.a.PureComponent),se=a(91),ce=a(92),le=a(45),oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).lowChange=a.lowChange.bind(Object(p.a)(a)),a.highChange=a.highChange.bind(Object(p.a)(a)),a.state={low:a.props.initial.low,high:a.props.initial.high},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){b(["low","high"],t,this.state)&&this.props.onChange(this.props.metric,this.state)}},{key:"lowChange",value:function(e){if(!isNaN(e.target.value)){var t=parseFloat(e.target.value);this.setState({low:t})}}},{key:"highChange",value:function(e){if(!isNaN(e.target.value)){var t=parseFloat(e.target.value);this.setState({high:t})}}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(se.a,{tag:"span"},i.a.createElement(L.a,{onChange:this.lowChange,value:this.state.low,type:"number",step:this.props.step,style:{padding:"0px",textAlign:"center"}}),i.a.createElement(ce.a,{tag:"span",addonType:"append"},i.a.createElement(le.a,null,"\u2264")),i.a.createElement("span",{style:{display:"flex",alignItems:"center",margin:"5px"}},this.props.metric),i.a.createElement(ce.a,{tag:"span",addonType:"prepend"},i.a.createElement(le.a,null,"\u2264")),i.a.createElement(L.a,{onChange:this.highChange,value:this.state.high,type:"number",step:this.props.step,style:{padding:"0px",textAlign:"center"}})))}}]),t}(i.a.PureComponent),de=["predictionTypes"],pe=["dataset","predictions","filteredAnswerTypes","answerTypeFilterFirstOnly","answerTypeFilterStrict","truncatedFilter","untruncatedFilter","filteredPredictionTypes","searchProps","F1Range","EMRange"],ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).datasetChange=a.datasetChange.bind(Object(p.a)(a)),a.predictionsChange=a.predictionsChange.bind(Object(p.a)(a)),a.filteredAnswerTypesChange=a.filteredAnswerTypesChange.bind(Object(p.a)(a)),a.answerTypeFilterFirstOnlyChange=a.answerTypeFilterFirstOnlyChange.bind(Object(p.a)(a)),a.answerTypeFilterStrictChange=a.answerTypeFilterStrictChange.bind(Object(p.a)(a)),a.truncatedFilterChange=a.truncatedFilterChange.bind(Object(p.a)(a)),a.untruncatedFilterChange=a.untruncatedFilterChange.bind(Object(p.a)(a)),a.filteredPredictionTypesChange=a.filteredPredictionTypesChange.bind(Object(p.a)(a)),a.searchFilterChange=a.searchFilterChange.bind(Object(p.a)(a)),a.rangeFilterChange=a.rangeFilterChange.bind(Object(p.a)(a)),a.state={filteredAnswerTypes:a.props.filteredAnswerTypes,answerTypeFilterFirstOnly:a.props.answerTypeFilterFirstOnly,answerTypeFilterStrict:a.props.answerTypeFilterStrict,truncatedFilter:a.props.truncatedFilter,untruncatedFilter:a.props.untruncatedFilter,filteredPredictionTypes:a.props.filteredPredictionTypes,searchProps:a.props.searchProps,F1Range:a.props.F1Range,EMRange:a.props.EMRange},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return w(de,pe,this.props,this.state,e,t,!1,this.constructor.name)}},{key:"componentDidUpdate",value:function(e,t){b(["predictionTypes"],e,this.props)&&this.setState({filteredPredictionTypes:this.props.predictionTypes.map(function(e){return e.key})}),this.props.onChange(this.state)}},{key:"datasetChange",value:function(e){this.setState({dataset:e})}},{key:"predictionsChange",value:function(e){this.setState({predictions:e})}},{key:"filteredAnswerTypesChange",value:function(e){this.setState({filteredAnswerTypes:e})}},{key:"answerTypeFilterFirstOnlyChange",value:function(e){this.setState({answerTypeFilterFirstOnly:e})}},{key:"answerTypeFilterStrictChange",value:function(e){this.setState({answerTypeFilterStrict:e})}},{key:"truncatedFilterChange",value:function(e){this.setState({truncatedFilter:e})}},{key:"untruncatedFilterChange",value:function(e){this.setState({untruncatedFilter:e})}},{key:"filteredPredictionTypesChange",value:function(e){this.setState({filteredPredictionTypes:e})}},{key:"searchFilterChange",value:function(e){this.setState({searchProps:e})}},{key:"rangeFilterChange",value:function(e,t){this.setState(Object(S.a)({},"".concat(e,"Range"),t))}},{key:"render",value:function(){var e=this;return i.a.createElement(G.a,{className:"ml-0",fluid:!0},i.a.createElement(B.a,{className:"row"},i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Dataset"),i.a.createElement(X.a,null,i.a.createElement(U,{onDatasetChange:this.datasetChange,useLocalDataset:this.props.useLocalDataset,allowSourceSelection:this.props.allowSourceSelection}))),i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Table Operations"),i.a.createElement(X.a,{style:{height:0,overflow:"auto"}},i.a.createElement(q.a,null,i.a.createElement(R.a,null,i.a.createElement(F.a,{color:"primary",size:"sm",style:{width:"100%"},onClick:function(){e.props.expandAllFunc&&e.props.expandAllFunc()}},"EXPAND ALL")),i.a.createElement(R.a,null,i.a.createElement(F.a,{color:"primary",size:"sm",style:{width:"100%"},onClick:function(){e.props.collapseAllFunc&&e.props.collapseAllFunc()}},"COLLAPSE ALL")),i.a.createElement(R.a,null,i.a.createElement(F.a,{color:"primary",size:"sm",style:{width:"100%"},onClick:function(){e.props.clearSelectedAnswersFunc&&e.props.clearSelectedAnswersFunc()}},"CLEAR SELECTED ANSWERS"))))),i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Answer Type Filter"),i.a.createElement(X.a,null,i.a.createElement(q.a,{className:"list-group-horizontal"},i.a.createElement(R.a,{style:{width:"100%"}},i.a.createElement(re,{onChange:this.filteredAnswerTypesChange,checked:this.state.filteredAnswerTypes,options:$})),i.a.createElement(R.a,{style:{width:"100%"}},i.a.createElement(I,{text:"Primary Only",inline:!1,checked:this.state.answerTypeFilterFirstOnly,onChange:this.answerTypeFilterFirstOnlyChange}),i.a.createElement(I,{text:"Strict",inline:!1,checked:this.state.answerTypeFilterStrict,onChange:this.answerTypeFilterStrictChange}))))),i.a.createElement(W.a,{className:"col-sm-6 p-0"},i.a.createElement(J.a,null,"Search"),i.a.createElement(X.a,null,i.a.createElement(ie,{onChange:this.searchFilterChange,instantSearch:this.props.instantSearch,searchProps:this.props.searchProps})))),i.a.createElement(B.a,{className:"row"},i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Predictions"),i.a.createElement(X.a,null,i.a.createElement(H,{onChange:this.predictionsChange}))),this.state.predictions?i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Prediction Head"),i.a.createElement(X.a,null,i.a.createElement(re,{onChange:this.filteredPredictionTypesChange,checked:this.state.filteredPredictionTypes,options:this.props.predictionTypes}))):null,this.state.predictions?i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Score Filter"),i.a.createElement(X.a,null,i.a.createElement(q.a,null,i.a.createElement(R.a,null,i.a.createElement(oe,{metric:"F1",initial:this.props.F1Range,step:"0.01",onChange:this.rangeFilterChange})),i.a.createElement(R.a,null,i.a.createElement(oe,{metric:"EM",initial:this.props.EMRange,step:"0.01",onChange:this.rangeFilterChange}))))):null,this.state.predictions?i.a.createElement(W.a,{className:"col-sm-2 p-0"},i.a.createElement(J.a,null,"Truncated Filter"),i.a.createElement(X.a,null,i.a.createElement(I,{text:"Show Truncated",inline:!1,checked:this.state.truncatedFilter,onChange:this.truncatedFilterChange}),i.a.createElement(I,{text:"Show Untruncated",inline:!1,checked:this.state.untruncatedFilter,onChange:this.untruncatedFilterChange}))):null))}}]),t}(i.a.Component),he=a(33),ge=a(23),fe=a.n(ge),ye=(a(69),a(70),a(71),a(46));function me(){var e=Object(ye.a)(["\n    white-space: pre-wrap;       /* css-3 */\n    white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */\n    white-space: -pre-wrap;      /* Opera 4-6 */\n    white-space: -o-pre-wrap;    /* Opera 7 */\n    word-wrap: break-word;       /* Internet Explorer 5.5+ */\n"]);return me=function(){return e},e}var ve=a(47).a.div(me());function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Oe(e,t,a){var n=t.passage_id,i=e.data.length,r=t.qa_pairs.reduce(Ce,{passage_id:n,qa_pairs:[],hasValidatedAnswers:e.hasValidatedAnswers,query_id_to_displayIndex:{}}),s=r.qa_pairs;e.hasValidatedAnswers=r.hasValidatedAnswers;var c=r.query_id_to_displayIndex;if(0!==s.length){var l=we({},t,{passage:t.passage.trim(),qa_pairs:s,passage_index:a});e.data.push(l),e.passage_id_to_displayIndex[n]=i,e.passage_id_to_queries_displayIndexes[n]=c}return e}function Ce(e,t,a){var n=e.qa_pairs.length,i=e.passage_id;!e.hasValidatedAnswers&&t.validated_answers&&t.validated_answers.length>0&&(e.hasValidatedAnswers=!0);var r=ee(t.answer),s=r.displayAnswer,c=r.answerType,l=[s],o=[c],d=[te(t.answer)];return c===Y?e:(t.validated_answers&&t.validated_answers.length>0&&t.validated_answers.forEach(function(e){var t=te(e);if(!d.some(function(e){if(e.length!==t.length)return!1;for(var a=0;a<t.length;a++)if(t[a].toLowerCase()!==e[a].toLowerCase())return!1;return!0})){var a=ee(e),n=a.displayAnswer,i=a.answerType;l.push(n),o.push(i),d.push(te(e))}}),e.qa_pairs.push(we({},t,{question:t.question.trim(),evaluationAnswers:d,displayAnswers:l,answersTypes:o,maximizingGroundTruthIndex:0,query_index:a,passage_id:i})),e.query_id_to_displayIndex[t.query_id]=n,e)}function Se(e,t,a,n,i,r,s,c,l){var o=e.data,d=e.filteredDataPerFilter,p=r.searchText;if(Boolean(p)&&!d.search){var u=o.reduce(Ee,{filteredData:[],searchProps:r,hasValidPredictions:e.hasValidPredictions}).filteredData;d.search=u}if(!d.answerTypes)if(t.length>0){if(t.length<$.length||n){var h=o.reduce(je,{filteredData:[],filteredTypes:t,fields:["answersTypes"],missingValue:Y,firstOnly:a,strict:n}).filteredData;d.answerTypes=h}}else d.answerTypes=[];if(e.hasValidPredictions&&!d.predictionTypes)if(i.length>0){var g=o.reduce(je,{filteredData:[],filteredTypes:i,fields:["predictionType"],missingValue:Z,strict:!1}).filteredData;d.predictionTypes=g}else d.predictionTypes=[];if(e.hasValidPredictions&&!d.F1Range){var f=s;if(f.low<=f.high){var y=o.reduce(ke,{filteredData:[],range:f,field:"f1"}).filteredData;d.F1Range=y}else d.F1Range=[]}if(e.hasValidPredictions&&!d.EMRange){var m=c;if(m.low<=m.high){var b=o.reduce(ke,{filteredData:[],range:m,field:"em"}).filteredData;d.EMRange=b}else d.EMRange=[]}if(e.hasValidPredictions&&!d.truncated){var w=l.showTruncated,O=l.showUntruncated;if(w||O)if(w&&O)d.truncated=o;else{var C=o.reduce(xe,{filteredData:[],showTruncated:w,showUntruncated:O}).filteredData;d.truncated=C}else d.truncated=[]}var S=function(e){var t=Object.values(e).filter(function(e){return Boolean(e)}),a=t.length;if(0===a)return;if(1===a)return t[0];if(!t.every(function(e){return e.length>0}))return[];return v(t,function(e){return e.passage_index},Fe)}(d,o.length);S||(S=o);for(var F={questionsCount:0,predictedCount:0,f1:0,em:0},E=0;E<S.length;E++){var T=S[E];F.questionsCount+=T.qa_pairs.length;var j=0,_=0,k=0;if(e.hasValidPredictions)for(var P=0;P<T.qa_pairs.length;P++){var x=T.qa_pairs[P];x.prediction&&(j+=1,_+=x.f1,k+=x.em)}F.f1+=_,F.em+=k,F.predictedCount+=j,j>0&&(T.f1=_/j,T.em=k/j)}return F.predictedCount>0?(F.f1/=F.predictedCount,F.em/=F.predictedCount):(F.f1=void 0,F.em=void 0),{filteredData:S,filteredDataPerFilter:d,metrics:F}}function Fe(e){var t=v(e.map(function(e){return e.qa_pairs}),function(e){return e.query_index},function(e){return Object.assign.apply(Object,[{}].concat(Object(K.a)(e)))});if(t.length>0)return Object.assign.apply(Object,[{}].concat(Object(K.a)(e),[{qa_pairs:t}]))}function Ee(e,t){var a=e.searchProps,n=a.searchText,i=t.passage.toLowerCase().includes(n)||t.passage_id.toLowerCase().includes(n),r=t.qa_pairs,s=!1;a.filterQuestions?s=(r=t.qa_pairs.filter(function(t){return Te(t,n,e.hasValidPredictions)})).length>0:i||(s=t.qa_pairs.some(function(t){return Te(t,n,e.hasValidPredictions)}));var c=r.length>0;return(i&&c||s)&&e.filteredData.push(we({},t,{qa_pairs:r})),e}function Te(e,t,a){var n=e.question.toLowerCase().includes(t)||e.query_id.toLowerCase().includes(t);if(n)return!0;for(var i=0;i<e.evaluationAnswers.length;i++){for(var r=e.evaluationAnswers[i],s=0;s<r.length&&!(n|=r[s].toLowerCase().includes(t));s++);if(n)break}if(n)return!0;if(a){var c=e.evaluationPrediction;c&&(n=c.some(function(e){return e.toLowerCase().includes(t)}))}return n}function je(e,t){var a=e.filteredTypes,n=t.qa_pairs.reduce(_e,{filtered_qa_pairs:[],filteredTypes:a,fields:e.fields,missingValue:e.missingValue,firstOnly:e.firstOnly,strict:e.strict}).filtered_qa_pairs;return n.length>0&&e.filteredData.push(we({},t,{qa_pairs:n})),e}function _e(e,t){for(var a=e.filteredTypes,n=e.fields,i=e.firstOnly,r=e.strict,s=new Set,c=!1,l=0;l<n.length;l++){var o=n[l],d=t[o]?t[o]:e.missingValue;if(Array.isArray(d)){for(var p=d,u=0;u<p.length;u++){var h=p[u];if(r)s.add(h.key);else if(c=a.includes(h.key))break;if(i)break}if(r&&s.size===a.length&&a.every(function(e){return s.has(e)})&&(c=!0),c)break}else{var g=d;if(c=a.includes(g.key))break}}return c&&e.filtered_qa_pairs.push(we({},t)),e}function ke(e,t){var a=e.range,n=t.qa_pairs.reduce(Pe,{filtered_qa_pairs:[],range:a,field:e.field}).filtered_qa_pairs;return n.length>0&&e.filteredData.push(we({},t,{qa_pairs:n})),e}function Pe(e,t){var a=e.range,n=e.field,i=!1;if(void 0!==t[n]){var r=t[n];i=r>=a.low&&r<=a.high}else i=!0;return i&&e.filtered_qa_pairs.push(we({},t)),e}function xe(e,t){var a=e.showTruncated,n=e.showUntruncated,i=t.qa_pairs.reduce(Ae,{filtered_qa_pairs:[],showTruncated:a,showUntruncated:n}).filtered_qa_pairs;return i.length>0&&e.filteredData.push(we({},t,{qa_pairs:i})),e}function Ae(e,t){var a=e.showTruncated,n=e.showUntruncated,i=!1;return a&&(i|=void 0!==t.max_passage_length),n&&(i|=void 0===t.max_passage_length),i&&e.filtered_qa_pairs.push(we({},t)),e}var De=a(26),qe=a.n(De),Re=a(98);function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ne={data:void 0,filteredData:void 0,filteredDataPerFilter:{answerTypes:void 0,predictionTypes:void 0,search:void 0,F1Range:void 0,EMRange:void 0,truncated:void 0},predictionTypes:[],hasValidatedAnswers:!1,hasValidPredictions:!1,metrics:void 0},Le={page:0,passagesPageSize:5,questionsPageSize:150,expanded_passage_ids:[],activeQuestions:{},questionResized:[],questionSorted:[]},Ve=["filteredAnswerTypes","answerTypeFilterFirstOnly","answerTypeFilterStrict","truncatedFilter","untruncatedFilter","filteredPredictionTypes","searchProps","F1Range","EMRange"],Me=["dataset","predictions"].concat(Ve),Ie=["page","passagesPageSize","questionsPageSize","expanded_passage_ids","activeQuestions","questionResized","questionSorted"],Qe=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(o.a)(this,Object(d.a)(t).call(this,e)),Ue=Ue.bind(Object(p.a)(a)),He=He.bind(Object(p.a)(a)),Ge=Ge.bind(Object(p.a)(a)),We=We.bind(Object(p.a)(a)),a.clearSelectedAnswers=a.clearSelectedAnswers.bind(Object(p.a)(a)),a.expandAll=a.expandAll.bind(Object(p.a)(a)),a.collapseAll=a.collapseAll.bind(Object(p.a)(a)),a.expandedChange=a.expandedChange.bind(Object(p.a)(a)),a.getExpanded=a.getExpanded.bind(Object(p.a)(a)),a.questionResizedChange=a.questionResizedChange.bind(Object(p.a)(a)),a.processData=a.processData.bind(Object(p.a)(a)),a.filterData=a.filterData.bind(Object(p.a)(a)),a.getSortedData=a.getSortedData.bind(Object(p.a)(a)),a.pageChanged=a.pageChanged.bind(Object(p.a)(a)),a.passagesPageSizeChanged=a.passagesPageSizeChanged.bind(Object(p.a)(a)),a.questionsPageSizeChanged=a.questionsPageSizeChanged.bind(Object(p.a)(a)),a.passageSortedChange=a.passageSortedChange.bind(Object(p.a)(a)),a.questionSortedChange=a.questionSortedChange.bind(Object(p.a)(a)),a.setInternals=a.setInternals.bind(Object(p.a)(a)),a.internals=fe()(Ne),a.state=fe()(Le),a.tableRef=i.a.createRef(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"setInternals",value:function(e){Object.assign(this.internals,e)}},{key:"componentDidMount",value:function(){this.props.sendClearSelectedAnswersFunc(this.clearSelectedAnswers),this.props.sendExpandAllFunc(this.expandAll),this.props.sendCollapseAllFunc(this.collapseAll)}},{key:"shouldComponentUpdate",value:function(e,t){if(b(["dataset"],this.props,e))this.setInternals(fe()(Ne)),this.setState(fe()(Le));else if(b(["predictions"],this.props,e))this.setInternals(fe()(Ne));else if(b(Ve,this.props,e)){var a=b(["filteredAnswerTypes","answerTypeFilterFirstOnly","answerTypeFilterStrict"],this.props,e),n=b(["filteredPredictionTypes"],this.props,e),i=b(["searchProps"],this.props,e),r=b(["F1Range"],this.props,e),s=b(["EMRange"],this.props,e),c=b(["truncatedFilter","untruncatedFilter"],this.props,e),l=a||n||i||r||s||c;this.setInternals({filteredData:l?void 0:this.internals.filteredData}),a&&(this.internals.filteredDataPerFilter.answerTypes=void 0),n&&(this.internals.filteredDataPerFilter.predictionTypes=void 0),i&&(this.internals.filteredDataPerFilter.search=void 0),r&&(this.internals.filteredDataPerFilter.F1Range=void 0),s&&(this.internals.filteredDataPerFilter.EMRange=void 0),c&&(this.internals.filteredDataPerFilter.truncated=void 0)}return w(Me,Ie,this.props,this.state,e,t,!1,this.constructor.name)}},{key:"componentDidUpdate",value:function(e,t){var a=this;b(["dataset","predictions"],e,this.props)&&this.props.onPredictionsTypeChanged(this.internals.predictionTypes),b(Ve,e,this.props)&&this.forceUpdate(function(){a.setState({page:0})})}},{key:"pageChanged",value:function(e){this.setState({page:e})}},{key:"passagesPageSizeChanged",value:function(e,t){this.setState({passagesPageSize:e,page:t})}},{key:"questionsPageSizeChanged",value:function(e,t){this.setState({questionsPageSize:e,page:t})}},{key:"passageSortedChange",value:function(e,t,a){this.forceUpdate()}},{key:"questionSortedChange",value:function(e,t,a){this.setState({questionSorted:e})}},{key:"expandedChange",value:function(e,t,a){var n=this.state.passagesPageSize,i=this.state.page,r=C(t[0],i,n),s=this.getSortedData()[r].passage_id,c=this.state.expanded_passage_ids.indexOf(s);if(-1===c)this.setState({expanded_passage_ids:[].concat(Object(K.a)(this.state.expanded_passage_ids),[s])});else{var l=Object(K.a)(this.state.expanded_passage_ids);l.splice(c,1),this.setState({expanded_passage_ids:l})}}},{key:"expandAll",value:function(){this.setState({expanded_passage_ids:Object(K.a)(this.internals.filteredData.map(function(e){return e.passage_id}))})}},{key:"collapseAll",value:function(){this.setState({expanded_passage_ids:[]})}},{key:"getExpanded",value:function(){var e=this,t={};if(!this.tableRef.current)return t;var a=this.getSortedData();if(!function(e,t){if(e.size!==t.size)return!1;for(var a in e)if(!t.has(a))return!1;return!0}(new Set(a.map(function(e){return e.passage_index})),new Set(this.internals.filteredData.map(function(e){return e.passage_index}))))return t;var n=this.state.passagesPageSize,i=this.state.page;return O(function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.reduce(function(e,i){var r=C(i,t,a);return n?e[r]=!0:e.push(r),e},n?{}:[])}(Object(K.a)(Array(n).keys()),i,n).filter(function(t){if(t<a.length){var n=a[t].passage_id;return e.state.expanded_passage_ids.includes(n)}return!1}),i,n,!0)}},{key:"questionResizedChange",value:function(e,t){this.setState({questionResized:e})}},{key:"clearSelectedAnswers",value:function(){this.setState({activeQuestions:{}})}},{key:"processData",value:function(){var e=function(e,t){var a=!1,n=!1,i={},r={},s=[],c=[];if(e){var l=e.reduce(Oe,{data:[],hasValidatedAnswers:!1,passage_id_to_displayIndex:{},passage_id_to_queries_displayIndexes:{}});if(c=l.data,a=l.hasValidatedAnswers,i=l.passage_id_to_displayIndex,r=l.passage_id_to_queries_displayIndexes,t)for(var o={},d=0;d<t.length;d++){var p=t[d],u=p.passage_id,h=p.query_id,g=i[u];if(void 0!==g){var f=c[g];void 0!==r[u][h]&&function(){n=!0;var e=f.qa_pairs[r[u][h]];if(e.prediction&&!(e=f.qa_pairs.find(function(t){return t.query_id===e.query_id&&!t.prediction})))return"continue";var t=o[p.predicted_ability];t||(t=o[p.predicted_ability]={key:p.predicted_ability,value:p.predicted_ability},s.push(t));var a=p.answer.value;if(e.prediction=Array.isArray(a)?a:[a],e.displayPrediction=ee({spans:e.prediction}).displayAnswer,e.predictionType=t,e.maximizingGroundTruth=p.maximizing_ground_truth.sort(),e.f1=p.f1,e.em=p.em,e.loss=p.loss,e.max_passage_length=-1===p.max_passage_length?void 0:p.max_passage_length,"arithmetic"!==t.key)e.evaluationPrediction=te({spans:e.prediction});else{var i=[],c=[];if(p.answer.numbers.filter(function(e){return 0!==e.sign}).forEach(function(e){i.push(e.value),c.push(-1===e.sign?"-":"+")}),i.length<=1)e.evaluationPrediction=te({spans:e.prediction});else{var l=i.map(function(e){return e===parseFloat(e.toLocaleString().replace(/,/g,""))?e.toLocaleString():e.toString()}),d=Number(e.displayPrediction)===parseFloat(Number(e.displayPrediction).toLocaleString().replace(/,/g,""))?Number(e.displayPrediction).toLocaleString():e.displayPrediction;e.displayPrediction="".concat(l.map(function(e,t){var a=c[t];return"".concat(0===t&&"+"===a?"":a).concat(0===t?"":" ").concat(e)}).join(" ")," = ").concat(d),e.evaluationPrediction=te({spans:[].concat(Object(K.a)(l),[d])})}}var g=e.maximizingGroundTruth,y=e.evaluationAnswers.findIndex(function(e){if(e.length!==g.length)return!1;for(var t=0;t<e.length;t++)if(e[t].toLowerCase()!==g[t].toLowerCase())return!1;return!0});-1!==y&&(e.maximizingGroundTruthIndex=y);var m=p.answer.spans;m&&m.length>0&&(e.predictionSpans=m)}()}}}return s.sort(),s.push(Y),{data:c,hasValidatedAnswers:a,hasValidPredictions:n,predictionTypes:s}}(this.props.dataset,this.props.predictions),t=e.data,a=e.hasValidatedAnswers,n=e.hasValidPredictions,i=e.predictionTypes;this.setInternals({data:t,hasValidatedAnswers:a,hasValidPredictions:n,predictionTypes:i})}},{key:"filterData",value:function(){var e=this.props.filteredAnswerTypes,t=this.props.answerTypeFilterFirstOnly,a=this.props.answerTypeFilterStrict,n=this.props.filteredPredictionTypes,i=this.props.searchProps,r=this.props.F1Range,s=this.props.EMRange,c={showTruncated:this.props.truncatedFilter,showUntruncated:this.props.untruncatedFilter},l=Se(this.internals,e,t,a,n,i,r,s,c),o=l.filteredData,d=l.filteredDataPerFilter,p=l.metrics;this.setInternals({filteredData:o,filteredDataPerFilter:d,metrics:p})}},{key:"getSortedData",value:function(){return this.tableRef.current.getResolvedState().sortedData}},{key:"render",value:function(){var e=this;this.internals.data||this.processData(),this.internals.filteredData||this.filterData();var t=[{Header:"#",id:"passage_index",accessor:"passage_index",width:50},{Header:"Passage ID",accessor:"passage_id",width:110},{Header:"Passage",accessor:"passage",Cell:Ue},{Header:"Count",id:"questions_count",accessor:function(e){return e.qa_pairs.length},width:50,resizable:!1},{Header:"F1",id:"f1",show:this.internals.hasValidPredictions,accessor:function(e){return Je(e.f1,4)},width:50,resizable:!1},{Header:"EM",id:"em",show:this.internals.hasValidPredictions,accessor:function(e){return Je(e.em,4)},width:50,resizable:!1}],a=[{Header:"#",accessor:"query_index",width:40},{Header:"Question ID",accessor:"query_id",width:100},{Header:"Question",accessor:"question",Cell:Ue},{Header:"Answer Options",accessor:"displayAnswers",Cell:Ge,width:150},{Header:"\u2192 Type",id:"answersTypes",accessor:function(e){return e.answersTypes},Cell:Be,width:100,resizable:!1},{Header:"Prediction",show:this.internals.hasValidPredictions,accessor:"displayPrediction",Cell:He,width:150},{Header:"Prediction Head",id:"predictionType",show:this.internals.hasValidPredictions,accessor:function(e){return e.predictionType?e.predictionType.value:""},width:110},{Header:"F1",id:"f1",show:this.internals.hasValidPredictions,accessor:function(e){return Je(e.f1,4)},width:50,resizable:!1},{Header:"EM",id:"em",show:this.internals.hasValidPredictions,accessor:function(e){return Je(e.em,4)},width:50,resizable:!1}];return i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"row justify-content-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("h4",null,"Passage Count: ",this.internals.filteredData.length.toLocaleString())),i.a.createElement("div",{className:"col-3"},i.a.createElement("h4",null,"Questions Count: ",this.internals.metrics.questionsCount.toLocaleString())),this.props.predictions?i.a.createElement("div",{className:"col-3"},i.a.createElement("h4",null,this.internals.hasValidPredictions?"Predictions Count: ".concat(this.internals.metrics.predictedCount.toLocaleString()):"Predictions do not match the dataset")):null,this.props.predictions&&this.internals.hasValidPredictions?i.a.createElement("div",{className:"col-3"},i.a.createElement("h4",null,"F1: ",Je(this.internals.metrics.f1,4),", EM: ",Je(this.internals.metrics.em,4))):null),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement(he.a,{ref:this.tableRef,className:"-striped-passage -highlight-passage",data:this.internals.filteredData,columns:t,minRows:0,showPaginationTop:!0,showPaginationBottom:!0,page:this.state.page,pageSize:this.state.passagesPageSize,pageSizeOptions:[1,5,10,20,25,50,100],onPageChange:this.pageChanged,onPageSizeChange:this.passagesPageSizeChanged,collapseOnSortingChange:!1,collapseOnPageChange:!1,collapseOnDataChange:!1,onSortedChange:this.passageSortedChange,expanded:this.getExpanded(),onExpandedChange:function(t,a,n){return e.expandedChange(t,a,n)},SubComponent:function(t){var n=t.original.qa_pairs;return i.a.createElement(he.a,{className:"-striped-question -highlight-question",style:{maxHeight:"400px"},data:n,columns:a,minRows:0,sorted:e.state.questionSorted,onSortedChange:e.questionSortedChange,resized:e.state.questionResized,onResizedChange:e.questionResizedChange,pageSize:e.state.questionsPageSize,pageSizeOptions:[1,5,10,20,25,150],onPageSizeChange:e.questionsPageSizeChanged,showPagination:!1,getTrProps:function(e,t,a,n){return{onClick:function(e,a){We(t,e),a&&a()}}}})}}))))}}]),t}(i.a.Component),Ue=function(e){var t,a=[],n=void 0,r=[],s=[],c=void 0,l=this.state.activeQuestions[e.original.passage_id];if(l&&("passage"===e.column.id?t=e.original.qa_pairs.find(function(e){return e.query_id===l}):l===e.original.query_id&&(t=e.original),t&&(n=(a=Object(K.a)(t.evaluationAnswers[t.maximizingGroundTruthIndex])).map(function(){return"gold_1"}),c={gold_1:"highlight-gold"},t.prediction))){"arithmetic"===t.predictionType.key&&(a=[],n=[],c={});var o="passage"===e.column.id?"p":"q";c.truncated_0="truncated-passage";var d=t.max_passage_length;if(void 0!==d&&"p"===o&&(r.push([d,e.original.passage.length]),s.push("truncated_0")),["counting"].includes(t.predictionType.key))a=[];else{var p=t.predictionSpans;p&&(p.reduce(function(e,t){return t[0]===o&&e.push([t[1],t[2]]),e},r),r.forEach(function(){return s.push("focus_3")}));var u,h,g=t.evaluationPrediction;if(g)(u=a).push.apply(u,Object(K.a)(g)),(h=n).push.apply(h,Object(K.a)(g.map(function(e){return"prediction_2"})));c.prediction_2="highlight-predicted",c["prediction_2-focus_3"]="highlight-predicted-focus",c["truncated_0-prediction_2-focus_3"]="highlight-predicted-focus-truncated",c["gold_1-prediction_2"]="highlight-correct",c["truncated_0-gold_1-prediction_2"]="highlight-correct-truncated",c["gold_1-prediction_2-focus_3"]="highlight-correct-focus",c["truncated_0-gold_1-prediction_2-focus_3"]="highlight-correct-focus-truncated"}}return i.a.createElement(ve,null,i.a.createElement(qe.a,{autoEscape:!0,searchWords:a,categoryPerSearchWordIndex:n,spans:r,categoryPerSpanIndex:s,highlightClassNamePerCategory:c,textToHighlight:e.value,paddingMultiplier:0}))},He=function(e){var t=[],a=e.original;return this.state.activeQuestions[a.passage_id]===a.query_id&&a.prediction&&(t=a.evaluationPrediction),i.a.createElement(ve,null,i.a.createElement(qe.a,{autoEscape:!0,highlightClassName:"highlight-predicted-regular",searchWords:t,textToHighlight:e.value||""}))},Ge=function(e){var t=[];return this.state.activeQuestions[e.original.passage_id]===e.original.query_id&&(t=e.original.evaluationAnswers[e.original.maximizingGroundTruthIndex]),i.a.createElement(Re.a,{style:{height:"100%"},striped:!0},i.a.createElement("tbody",null,e.value.map(function(a,n){return i.a.createElement("tr",{key:n},i.a.createElement("td",{style:{whiteSpace:"pre-wrap",padding:0,borderTop:0}},i.a.createElement(ve,null,i.a.createElement(qe.a,{autoEscape:!0,highlightClassName:"highlight-gold",searchWords:e.original.maximizingGroundTruthIndex===n?t:[],textToHighlight:a}))))})))},Be=function(e){return i.a.createElement(Re.a,{style:{height:"100%"},striped:!0},i.a.createElement("tbody",null,e.value.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",{style:{whiteSpace:"pre-wrap",padding:0,borderTop:0}},e.value))})))},We=function(e,t){var a=e.original.passage_id,n=e.original.query_id;if(this.state.activeQuestions[a]===n){var i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.state.activeQuestions);delete i[a],this.setState({activeQuestions:i})}else this.setState({activeQuestions:Object(S.a)({},a,n)})};function Je(e,t,a){return a&&(e*=100),void 0!==e?parseFloat((Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)):void 0}var Xe=Qe,Ke=[],Ye=["dataset","predictions","filteredAnswerTypes","answerTypeFilterFirstOnly","answerTypeFilterStrict","truncatedFilter","untruncatedFilter","predictionTypes","filteredPredictionTypes","searchProps","F1Range","EMRange","navbarSticky","isOpen"],Ze=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).settingsChange=a.settingsChange.bind(Object(p.a)(a)),a.getClearSelectedAnswersFunc=a.getClearSelectedAnswersFunc.bind(Object(p.a)(a)),a.getExpandAllFunc=a.getExpandAllFunc.bind(Object(p.a)(a)),a.getCollapseAllFunc=a.getCollapseAllFunc.bind(Object(p.a)(a)),a.predictionTypesChanged=a.predictionTypesChanged.bind(Object(p.a)(a)),a.toggleMenu=a.toggleMenu.bind(Object(p.a)(a)),a.state={useLocalDataset:!0,allowSourceSelection:!1,filteredAnswerTypes:["multi_span","single_span","number","date"],answerTypeFilterFirstOnly:!0,answerTypeFilterStrict:!1,truncatedFilter:!0,untruncatedFilter:!0,predictionTypes:[],filteredPredictionTypes:[],instantSearch:!0,searchProps:{searchText:"",filterQuestions:!1},F1Range:{low:0,high:1},EMRange:{low:0,high:1},navbarSticky:void 0,isOpen:!0,showNavbarImage:!1,dataset:void 0,predictions:void 0,clearSelectedAnswersFunc:void 0,expandAllFunc:void 0,collapseAll:void 0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return w(Ke,Ye,this.props,this.state,e,t,!1,this.constructor.name)}},{key:"settingsChange",value:function(e){this.setState({filteredAnswerTypes:e.filteredAnswerTypes,answerTypeFilterFirstOnly:e.answerTypeFilterFirstOnly,answerTypeFilterStrict:e.answerTypeFilterStrict,truncatedFilter:e.truncatedFilter,untruncatedFilter:e.untruncatedFilter,filteredPredictionTypes:e.filteredPredictionTypes,searchProps:e.searchProps,dataset:e.dataset,predictions:e.predictions,F1Range:e.F1Range,EMRange:e.EMRange})}},{key:"getClearSelectedAnswersFunc",value:function(e){this.setState({clearSelectedAnswersFunc:e})}},{key:"getExpandAllFunc",value:function(e){this.setState({expandAllFunc:e})}},{key:"getCollapseAllFunc",value:function(e){this.setState({collapseAllFunc:e})}},{key:"predictionTypesChanged",value:function(e){this.setState({predictionTypes:e})}},{key:"toggleMenu",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(h.a,{color:"light",light:!0,sticky:this.state.navbarSticky,style:{borderBottom:"1px solid rgba(0,0,0,0.15)"}},i.a.createElement("div",{style:{width:"100%"}},this.state.showNavbarImage?i.a.createElement("div",{className:"navbar-brand"},i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://allennlp.org/drop"},i.a.createElement("img",{style:{paddingRight:"15px",marginBottom:"3px"},src:"https://allennlp.org/assets/allennlp-logo-color.png",height:"14",alt:""})),i.a.createElement("button",{className:"fakeLink",onClick:function(){e.setState({navbarSticky:"top"===e.state.navbarSticky?void 0:"top"})}},"DROP Explorer")):i.a.createElement(g.a,{onClick:function(){e.setState({navbarSticky:"top"===e.state.navbarSticky?void 0:"top"})}},"DROP Explorer"),i.a.createElement(f.a,{style:{float:"right",marginTop:"0.25rem"},onClick:this.toggleMenu})),i.a.createElement(y.a,{isOpen:this.state.isOpen,navbar:!0},i.a.createElement(ue,{onChange:this.settingsChange,useLocalDataset:this.state.useLocalDataset,allowSourceSelection:this.state.allowSourceSelection,expandAllFunc:this.state.expandAllFunc,collapseAllFunc:this.state.collapseAllFunc,filteredAnswerTypes:this.state.filteredAnswerTypes,answerTypeFilterFirstOnly:this.state.answerTypeFilterFirstOnly,answerTypeFilterStrict:this.state.answerTypeFilterStrict,truncatedFilter:this.state.truncatedFilter,untruncatedFilter:this.state.untruncatedFilter,filteredPredictionTypes:this.state.filteredPredictionTypes,predictionTypes:this.state.predictionTypes,instantSearch:this.state.instantSearch,searchProps:this.state.searchProps,F1Range:this.state.F1Range,EMRange:this.state.EMRange,clearSelectedAnswersFunc:this.state.clearSelectedAnswersFunc}))),i.a.createElement(Xe,{dataset:this.state.dataset,predictions:this.state.predictions,filteredAnswerTypes:this.state.filteredAnswerTypes,answerTypeFilterFirstOnly:this.state.answerTypeFilterFirstOnly,answerTypeFilterStrict:this.state.answerTypeFilterStrict,truncatedFilter:this.state.truncatedFilter,untruncatedFilter:this.state.untruncatedFilter,filteredPredictionTypes:this.state.filteredPredictionTypes,searchProps:this.state.searchProps,F1Range:this.state.F1Range,EMRange:this.state.EMRange,sendClearSelectedAnswersFunc:this.getClearSelectedAnswersFunc,sendExpandAllFunc:this.getExpandAllFunc,sendCollapseAllFunc:this.getCollapseAllFunc,onPredictionsTypeChanged:this.predictionTypesChanged}))}}]),t}(i.a.Component);s.a.render(i.a.createElement(Ze,null),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.500c6e7e.chunk.js.map